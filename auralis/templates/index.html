{% extends "base.html" %}

{% block title %}Auralis - Fresh AI Music{% endblock %}

{% block content %}
<!-- Hero stats -->
<div class="stat-grid">
    <div class="stat-card">
        <div class="stat-number">{{ total_albums }}</div>
        <div class="stat-label">AI Albums</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_artists }}</div>
        <div class="stat-label">AI Artists</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_tracks }}</div>
        <div class="stat-label">Tracks</div>
    </div>
</div>

<!-- 3-column feature grid (Jamendo style) -->
<div class="feature-grid">
    <div class="feature-card">
        <div class="feature-title">Discover</div>
        <p>Listen to {{ total_albums }}+ AI-generated albums from emerging artists. Free download, Creative Commons licensed.</p>
    </div>
    
    <div class="feature-card">
        <div class="feature-title">Join the lab</div>
        <p>Review, tag and rate AI music. Get personalized recommendations from our neural network.</p>
    </div>
    
    <div class="feature-card">
        <div class="feature-title">Share</div>
        <p>Enter the AI era: post any album on your blog and spread the sound of tomorrow!</p>
    </div>
</div>

<!-- Main content grid -->
<div class="main-layout">
    <!-- Left column: News -->
    <div class="news-section">
        <h2 class="section-title">auralis news</h2>
        
        {% if news %}
            {% for item in news %}
            <article class="news-item">
                <h3 class="news-title">{{ item.title }}</h3>
                <div class="news-date">{{ item.date.strftime('%B %d, %Y') }}</div>
                <p>{{ item.summary or item.content[:200] }}...</p>
                <a href="#" class="read-more">> Read more ...</a>
            </article>
            {% endfor %}
        {% else %}
            <article class="news-item">
                <h3 class="news-title">Welcome to Auralis!</h3>
                <div class="news-date">{{ now.strftime('%B %d, %Y') }}</div>
                <p>A new era of AI-generated music begins. Upload your neural compositions and join the community.</p>
                <a href="#" class="read-more">> Read more ...</a>
            </article>
            
            <article class="news-item">
                <h3 class="news-title">Support Creative Commons AI</h3>
                <div class="news-date">{{ now.strftime('%B %d, %Y') }}</div>
                <p>We believe in open AI music. All tracks are CC licensed, free to share and remix.</p>
                <a href="#" class="read-more">> Read more ...</a>
            </article>
        {% endif %}
    </div>
    
    <!-- Right column: Sidebar -->
    <div class="sidebar">
        <div class="sidebar-block">
            <h3 class="sidebar-title">Advertisements</h3>
            <p style="color: var(--text-light); font-style: italic; font-size: 14px;">
                ✦ Train your own music AI with our datasets ✦
            </p>
        </div>
        
        <div class="sidebar-block">
            <h3 class="sidebar-title">Next virtual concerts</h3>
            {% if concerts %}
                {% for concert in concerts %}
                <div style="margin-bottom: 15px;">
                    <strong style="color: var(--primary);">{{ concert.artist_name }}</strong><br>
                    <span style="font-size: 12px; color: var(--text-light);">
                        {{ concert.date.strftime('%B %d, %Y') }}<br>
                        {{ concert.venue or 'Virtual Event' }}
                    </span>
                </div>
                {% endfor %}
            {% else %}
                <div style="margin-bottom: 15px;">
                    <strong style="color: var(--primary);">Neural Ensemble</strong><br>
                    <span style="font-size: 12px; color: var(--text-light);">
                        February 15, 2024<br>
                        Virtual Reality
                    </span>
                </div>
                <div>
                    <strong style="color: var(--primary);">Synthetic Voices</strong><br>
                    <span style="font-size: 12px; color: var(--text-light);">
                        March 01, 2024<br>
                        AI Space
                    </span>
                </div>
            {% endif %}
        </div>
        
        <div class="sidebar-block">
            <h3 class="sidebar-title">Random tag : synthetic</h3>
            <div class="tag-cloud">
                {% if tags %}
                    {% for tag in tags %}
                    <a href="#" class="tag">{{ tag.name }}</a>
                    {% endfor %}
                {% else %}
                    <a href="#" class="tag">neural</a>
                    <a href="#" class="tag">ambient</a>
                    <a href="#" class="tag">synthetic</a>
                    <a href="#" class="tag">dreamcore</a>
                    <a href="#" class="tag">algorithmic</a>
                    <a href="#" class="tag">latent-space</a>
                    <a href="#" class="tag">diffusion</a>
                    <a href="#" class="tag">transformer</a>
                {% endif %}
            </div>
        </div>
        
        <div class="sidebar-block">
            <h3 class="sidebar-title">Latest albums</h3>
            <div style="display: flex; flex-direction: column; gap: 15px;">
                {% if latest_albums %}
                    {% for album in latest_albums %}
                    <div style="display: flex; align-items: center; gap: 10px;">
                        {% if album.cover_image %}
                        <img src="{{ album.cover_image }}" alt="" style="width: 40px; height: 40px; border-radius: 4px; object-fit: cover;">
                        {% else %}
                        <div style="width: 40px; height: 40px; background: var(--bg-light); border-radius: 4px;"></div>
                        {% endif %}
                        <div style="flex: 1;">
                            <a href="{{ url_for('albums.detail', album_id=album.id) }}" style="font-weight: 600; color: var(--primary); text-decoration: none; font-size: 14px;">
                                {{ album.title }}
                            </a><br>
                            <span style="font-size: 12px; color: var(--text-light);">
                                {{ album.artist.name }} • {{ album.genre or 'AI' }}
                            </span>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div style="width: 40px; height: 40px; background: var(--bg-light); border-radius: 4px;"></div>
                        <div>
                            <span style="font-weight: 600; color: var(--primary);">Neural Symphony</span><br>
                            <span style="font-size: 12px;">AI Composer • Electronic</span>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- Featured albums grid -->
<div style="margin-top: 50px;">
    <h2 class="section-title">Featured neural albums</h2>
    <div class="album-grid">
        {% for album in featured_albums %}
        <div class="album-card">
            {% if album.cover_image %}
            <img src="{{ album.cover_image }}" alt="{{ album.title }}" class="album-cover">
            {% else %}
            <div style="width: 100%; aspect-ratio: 1; background: linear-gradient(45deg, var(--bg-light), #e0e0e0);"></div>
            {% endif %}
            <div class="album-info">
                <a href="{{ url_for('albums.detail', album_id=album.id) }}" class="album-title">
                    {{ album.title[:30] }}{% if album.title|length > 30 %}...{% endif %}
                </a>
                <div class="album-artist">{{ album.artist.name }}</div>
            </div>
        </div>
        {% else %}
        <!-- Placeholders -->
        <div class="album-card">
            <div style="width: 100%; aspect-ratio: 1; background: linear-gradient(45deg, #e9ecef, #dee2e6);"></div>
            <div class="album-info">
                <span class="album-title">Dreams of Silicon</span>
                <div class="album-artist">SynthMind</div>
            </div>
        </div>
        <div class="album-card">
            <div style="width: 100%; aspect-ratio: 1; background: linear-gradient(45deg, #e9ecef, #dee2e6);"></div>
            <div class="album-info">
                <span class="album-title">Latent Space</span>
                <div class="album-artist">Neural Collective</div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
